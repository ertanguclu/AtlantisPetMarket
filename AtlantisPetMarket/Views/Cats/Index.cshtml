@model IEnumerable<ProductCartVM>

@{
    ViewData["Title"] = "Ürünler";
    Layout = "~/Views/Shared/_HomeLayout.cshtml";
}
<link rel="stylesheet" href="https://cdn.materialdesignicons.com/5.2.45/css/materialdesignicons.min.css" />

<div class="container">
    <div class="isotope-container row">
        @foreach (var item in Model)
        {
            <div class="item cat col-md-4 col-lg-3 my-4">
                <div class="card">
                    <a href="single-product.html">
                        <img src="~/productimage/@item.ProductPhotoPath" class="product-image-wrapper img-fluid rounded-4" alt="image">
                    </a>
                    <div class="card-body p-0">
                        <a asp-action="Details" asp-controller="Cart" asp-route-Id="@item.Id">
                            <h3 class="card-title pt-4 m-0">@item.ProductName</h3>
                        </a>

                        <div class="card-text">
                            <span class="rating secondary-font">
                                <i class="mdi mdi-star text-primary"></i>
                                <i class="mdi mdi-star text-primary"></i>
                                <i class="mdi mdi-star text-primary"></i>
                                <i class="mdi mdi-star text-primary"></i>
                                <i class="mdi mdi-star text-primary"></i>
                                5.0
                            </span>

                            <h3 class="secondary-font text-primary">@item.Price.ToString("C")</h3>

                            <div class="add-to-cart-container mt-3">
                                <form asp-controller="Cart" asp-action="DecreaseQuantity" asp-route-cartItemId="@item.Id" method="post">
                                    <button type="submit" class="btn-cart px-2 py-2">
                                        <i class="mdi mdi-minus"></i>
                                    </button>
                                </form>

                                <div class="px-2 py-2">
                                    <h5 class="m-0">@item.Quantity</h5>
                                </div>

                                <form asp-controller="Cart" asp-action="IncreaseQuantity" asp-route-cartItemId="@item.Id" method="post">
                                    <button type="submit" class="btn-cart px-2 py-2">
                                        <i class="mdi mdi-plus"></i>
                                    </button>
                                </form>

                                <form asp-controller="Cart" asp-action="Create" asp-route-id="@item.Id" method="post">
                                    <input type="hidden" name="ProductId" value="@item.Id" />
                                    <input type="hidden" name="Quantity" value="1" />
                                    <button type="submit" class="btn btn-primary rounded submit px-3 d-flex justify-content-center align-items-center ms-3">
                                        <h5 class="text m-0">Sepete ekle</h5>
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
</div>
<style>
    .text {
        text-transform: none; /* Metnin olduğu gibi görünmesini sağlar */
    }

    .btn-cart {
        background: transparent; /* Arka planı kaldırır */
        border: none; /* Kenarlığı kaldırır */
        color: #000; /* İkon rengini belirler */
        font-size: 1.5rem; /* İkon boyutunu ayarlar */
    }

        .btn-cart i {
            line-height: 1; /* İkonu ortalar */
        }

        .btn-cart:hover {
            color: #DEAD6F; /* Hover durumunda ikon rengini değiştirir */
        }

    .btn-primary {
        background-color: #F7EEE4; /* Buton arka plan rengi */
        border-color: #F7EEE4; /* Kenar rengi */
        color: #000; /* Metin rengi */
    }
</style>
<style>
    .product-image-wrapper {
        width: 280px; /* Genişliği biraz küçülttük */
        height: 255px; /* Yüksekliği biraz küçülttük */
        overflow: hidden;
        border-radius: 15px;
        background-color: #F2F2F2;
    }


        .product-image-wrapper img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 15px;
        }

    .card {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        height: 100%;
    }

    .card-body {
        display: flex;
        flex-direction: column;
        flex-grow: 1;
        padding: 15px;
    }

    .card-title {
        height: 60px; /* Başlığın sabit yüksekliğini ayarlar */
        overflow: hidden; /* Taşan metni gizler */
        text-overflow: ellipsis; /* Taşan metin için üç nokta koyar */
        display: -webkit-box;
        -webkit-line-clamp: 2; /* En fazla iki satır gösterir */
        -webkit-box-orient: vertical;
        font-size: 1em; /* Font boyutunu ayarlar */
        line-height: 1.1em; /* Satır yüksekliğini ayarlar */
    }


    .card-text {
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        flex-grow: 1;
    }

    .single-line .card-title {
        max-height: 35px; /* Tek satır olduğunda daha az yer kaplar */
        margin-bottom: 40px; /* Tek satır olduğunda ekstra boşluk ekler */
    }

    .add-to-cart-container {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-top: auto;
    }


</style>
@section scripts {
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var cardTitles = document.querySelectorAll(".card-title");

            cardTitles.forEach(function (title) {
                var lineHeight = parseInt(window.getComputedStyle(title).lineHeight);
                var height = title.scrollHeight;
                var lines = height / lineHeight;

                if (lines <= 2) {
                    title.style.height = "70px"; // İki satıra kadar olan yükseklik
                } else {
                    title.style.height = "70px"; // İki satır olduğunda 70px yap
                }
            });
        });
    </script>
}

